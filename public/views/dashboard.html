<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="css/dashboard.css">
    <script src="https://code.angularjs.org/1.4.7/angular.js"></script>
    <script src="js/controllers/wildhacks.js"></script>
  </head>
  <body ng-app="wildhacks">
    <div ng-controller="DashboardCtrl">
      <h1>Applicants Accepted: {{numAccepted}}/{{numApplications}}</h1>

      <!-- FILTER BY SCHOOL -->
      <input type="text" ng-model="searchTerm" placeholder="Filter by school" ng-model-options="{ debounce:500 }">
      <button ng-click="acceptAll()">Accept All</button>

      <!-- TABLE OF APPLICATIONS -->
      <table>
        <th>
          <!-- stuff -->
          <td>18+?</td>
          <td>Completed?</td>
          <td>Submission Date</td>
          <!-- basic info -->
          <td>Name</td>
          <td>Gender</td>
          <td>Hackathons</td>
          <!-- educational/geographical info -->
          <td>School</td>
          <td>Year</td>
          <td>Major</td>
          <td>Traveling From</td>
          <!-- application -->
          <td>Blurb</td>
          <td>Links</td>
          <td>Teammates</td>
        </th>
        <tr class={{application.status}} ng-repeat="application in (filteredApps = (applications | orderBy:'last_cache_time':true | filter: { school:searchTerm })) track by $index">
          <td>
            <!-- toggle an application's status here -->
            <form action="">
              <input type="radio" name="status" ng-model="application.status" ng-change="toggleStatus(application)" value="accepted">Accept</br>
              <input type="radio" name="status" ng-model="application.status" ng-change="toggleStatus(application)" value="rejected">Reject</br>
              <input type="radio" name="status" ng-model="application.status" ng-change="toggleStatus(application)" value="waitlisted">Waitlist</br>
              <input type="radio" name="status" ng-model="application.status" ng-change="toggleStatus(application)" value="unfinished">Unfinished</br>
              <input type="radio" name="status" ng-model="application.status" ng-change="toggleStatus(application)" value="pending">Pending</br>
            </form>
          <!-- stuff -->
          <td>{{application['18yet']}}</td>
          <td>{{application.complete}}</td>
          <td>{{application.last_cache_time | date:'MM/dd h:mm a' }}</td>
          <!-- basic info -->
          <td>{{application['first-name']}} {{application['last-name']}}</td>
          <td>{{application.gender}}</td>
          <td>{{application.hackathons}}</td>
          <!-- educational/geographical info -->
          <td>{{application.school}}</td>
          <td>{{application.year}}</td>
          <td>{{application.major}}</td>
          <td>{{application.travel}}</td>
          <!-- application -->
          <td>{{application['why-do-you-want-to-come']}}</td>
          <td><a ng-show="'{{application.github}}'" href="'{{application.github}}'">GitHub</a>|<a ng-show="'{{application.website}}'" href="'{{application.website}}'">Website</a></td>
          <td>{{application.teammates}}</td>
        </tr>
      </table> <!-- TABLE OF APPLICATIONS -->
    </div>
  </body>
</html>
